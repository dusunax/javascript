# ðŸ“ë©”ëª¨\_231026

## ðŸ”Ž í˜„ìž¬ í•™ìŠµ í”Œëžœ

- 10ì‹œ~
  - this
  - https://codesandbox.io/s/study-this-c9nc62?file=/src/index.mjs
- | ìˆœì„œ | ì¼ì • | ë‚´ìš©         | ê´€ë ¨ ì„œì /ê°•ì˜              |
  | ---- | ---- | ------------ | --------------------------- |
  | 1    | 22   | JS ê°œë… ê³µë¶€ | ëª¨ë˜ ìžë°”ìŠ¤í¬ë¦½íŠ¸ Deep Dive |

## 22. this

- ê°ì²´ëŠ”? stateì„ ë‚˜íƒ€ë‚´ëŠ” í”„ë¡œí¼í‹°ì™€, behaviorë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë©”ì„œë“œë¥¼ í•˜ë‚˜ì˜ ë…¼ë¦¬ì ì¸ ë‹¨ìœ„ë¡œ ë¬¶ì€ ë³µí•©ì ì¸ êµ¬ì¡°
- (ë™ìž‘) ë©”ì„œë“œ => ìžì‹ ì´ ì†í•œ ê°ì²´ì˜ ìƒíƒœë¥¼ ì°¸ì¡°/ë³€ê²½
  - => ìžì‹ ì´ ì†í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì‹ë³„ìžë¥¼ ì°¸ì¡°í•  ìˆ˜ ìžˆì–´ì•¼í•¨
- ê°ì²´ ë¦¬í„¸ë¡œ ìƒì„±í•œ ê°ì²´: ìžì‹ ì´ ì†í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì‹ë³„ìžë¥¼ ìž¬ê·€ì ìœ¼ë¡œ ì°¸ì¡°

```tsx
const circle = {
  radius: 5,
  getDiameter() {
    return 2 * circle.radius;
  },
};

console.log(circle.getDiameter()); // 10
```

- getDiameter í‘œí˜„ì‹ì´ í‰ê°€ë˜ëŠ” ì‹œì ì€? getDiameter ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì–´ í•¨ìˆ˜ ëª¸ì²´ê°€ ì‹¤í–‰ë˜ëŠ” ì‹œì 
- ìŒ.. ìƒì„±ìž í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ëŠ” ì‹œì  => ì•„ì§ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì „ì´ë¯€ë¡œ, ìƒì„±ìž í•¨ìˆ˜ê°€ ì•žìœ¼ë¡œ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì‹ë³„ìžx
  - íŠ¹ìˆ˜í•œ this ì‹ë³„ìž!

### This

- ìžì‹ ì´ ì†í•œ ê°ì²´ ë˜ëŠ” ìžì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” `ìžê¸° ì°¸ì¡° ë³€ìˆ˜ self-referencing variable`ë‹¤.
- thisë¥¼ í†µí•´, ìžì‹ ì´ ì†í•œ ê°ì²´ or ìžì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì†Œë“œë¥¼ ì°¸ì¡°í•  ìˆ˜ ìžˆë‹¤.
- thisëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì— ì˜í•´ ì•”ë¬µì ìœ¼ë¡œ ìƒì„±ë˜ë©°, ì½”ë“œ ì–´ë””ì„œë“  ì°¸ì¡°í•  ìˆ˜ ìžˆë‹¤.
  - => í•¨ìˆ˜ ë‚´ arguments ê°ì²´ì™€ this ~~ ì•”ë¬µì ìœ¼ë¡œ í•¨ìˆ˜ ë‚´ë¶€ì— ì „ë‹¬ë¨ // ì§€ì—­ ë³€ìˆ˜ì²˜ëŸ¼ ì‚¬ìš©
  - `this ë°”ì¸ë”©`ì€ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ì˜í•´ ë™ì ìœ¼ë¡œ ê²°ì •
    - this ë°”ì¸ë”©ì€ ì‹ë³„ìžì™€ ê°’ì„ ì—°ê²°í•˜ëŠ” ê³¼ì • ~ thisì™€ thisê°€ ê°€ë¦¬í‚¬ ê°ì²´ë¥¼ ë°”ì¸ë”©
- clientì—ì„œ thisëŠ” ì „ì—­ ê°ì²´ windowë¥¼ ê°€ë¦¬í‚¨ë‹¤.
- ## ì¼ë°˜ í•¨ìˆ˜ ë‚´ì—ì„œë„ thisëŠ” ì „ì—­ ê°ì²´ window (ì¤‘ì²© í•¨ìˆ˜ë„ ë§ˆì°¬ê°€ì§€, ì½œë°± í•¨ìˆ˜ê°€ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ë©´ ì—­ì‹œ thisëŠ” ì „ì—­ ê°ì²´)
- ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ, thisëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´
- strict modeì˜ ê²½ìš°~~
  - ì¼ë°˜ í•¨ìˆ˜ ë‚´ì—ì„œ thisë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì—, undefiendë¥¼ ë°”ì¸ë”©í•œë‹¤. (thisëŠ” ìžê¸° ì°¸ì¡° ë³€ìˆ˜ë‹¤.)

### í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ê³¼ ë°”ì¸ë”©

> ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ì™€ this ë°”ì¸ë”©ì˜ ê²°ì • ì‹œê¸°
>
> - lexical scope : í•¨ìˆ˜ì˜ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•˜ëŠ” ë°©ì‹, í•¨ìˆ˜ ì •ì˜ê°€ í‰ê°€ë˜ì–´, í•¨ìˆ˜ ê°ì²´ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì— ìƒìœ„ ìŠ¤ì½”í”„ ê²°ì •
> - this ë°”ì¸ë”© : í•¨ìˆ˜ í˜¸ì¶œ ì‹œì ì— ê²°ì •

- ë™ì¼í•œ í•¨ìˆ˜ë„ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ í˜¸ì¶œ í•  ìˆ˜ ìžˆë‹¤.

1. ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ
2. ë©”ì„œë“œ í˜¸ì¶œ
3. ìƒì„±ìž í•¨ìˆ˜ í˜¸ì¶œ
4. Function.prototype.apply/call/bind ë©”ì„œë“œì— ì˜í•œ `ê°„ì ‘ í˜¸ì¶œ`

- ì˜ˆì œ => https://codesandbox.io/s/study-this-c9nc62?file=/src/index.mjs:1035-1490

```tsx
// 1. ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ
foo(); // ì „ì—­ ê°ì²´

// 2. ë©”ì„œë“œ í˜¸ì¶œ
const obj = { foo };
obj.foo(); // object obj

// 3. constructor function
new foo();

// 4. Function.prototype.apply/call/bind
const bar = { name: "bar" };

foo.call(bar, 0); // ì²«ë²ˆì§¸ ì¸ìžë¡œ thisë¥¼ ë„˜ê¸°ê³ , ë‘ë²ˆì§¸ ì¸ìžë¡œ ì¸ìˆ˜ë¥¼ ë„˜ê²¨ì„œ ì‹¤í–‰ // arguments: {0: 0}
foo.apply(bar, ["", ""]); // ì²«ë²ˆì§¸ ì¸ìžë¡œ thisë¥¼ ë„˜ê¸°ê³ , ë‘ë²ˆì§¸ ì¸ìžë¡œ ìœ ì‚¬ë°°ì—´ ê°ì²´ í˜¹ì€ ê°ì²´ë¥¼ ë„˜ê²¨ì„œ ì‹¤í–‰ // arguments: {0: "", 1: ""}
foo.bind(bar)("hihi"); // thisë¥¼ ë°”ì¸ë”©, ê·¸ë¦¬ê³  ì‹¤í–‰í–ˆìŒ // arguments: {0: "hihi"}
```

- ë©”ì„œë“œ ë‚´ì˜ ì¤‘ì²© í•¨ìˆ˜ ë˜ëŠ” ì½œë°± í•¨ìˆ˜ê°€ thisë¥¼ ì „ì—­ ê°ì²´ë¡œ ë°”ì¸ë”©í•œë‹¤ë©´ ë¬¸ì œë‹¤.
  - í—¬í¼ í•¨ìˆ˜ë¡œ ë™ìž‘í•˜ê¸° ì–´ë ¤ì›Œì§„ë‹¤~
- ë‹¤ìŒê³¼ ê°™ì´ ì“¸ ìˆ˜ ìžˆë‹¤í•¨

```tsx
var value = 1;

const objB = {
  value: 100,
  foo() {
    // ë³€ìˆ˜ì— this ê°’ ì €ìž¥
    console.log("foo's this: ", this);
    const that = this;

    setTimeout(function () {
      console.log("callback this: ", this, this.value);
      console.log("that", that, that.value);
    }, 100);
  },
  bar() {
    // ëª…ì‹œì ìœ¼ë¡œ ë°”ì¸ë”©
    console.log("foo's this: ", this);

    setTimeout(
      function () {
        console.log("callback this: ", this, this.value);
      }.bind(this),
      100
    );
  },
  foobar() {
    // arrow function
    console.log("foo's this: ", this);

    setTimeout(() => {
      console.log("callback this: ", this, this.value);
    }, 100);
  },
};
```
