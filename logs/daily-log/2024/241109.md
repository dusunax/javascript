# ğŸ“ë©”ëª¨\_241109

## ì»´í¬ë„ŒíŠ¸ì˜ Containtment & Specialization

- Containtment: sidebar, dialogì™€ ê°™ì€ ì œë„ˆë¦­ ì»´í¬ë„ŒíŠ¸ box, don't know the children ahead of time
- Specialization: Special case, ì¼ë°˜ì ì¸ ì»´í¬ë„ŒíŠ¸ì˜ ë” íŠ¹ì •í•œ ë²„ì „ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±

## React.cloneElement(): Manipulating children dynamically in JSX ğŸ¤”

- ì´ë ‡ê²Œ ìì‹ ìš”ì†Œì— propsë¥¼ ì§ì ‘ ì¶”ê°€í•˜ê±°ë‚˜ ë®ì–´ì“¸ ìˆ˜ ìˆë‹¤.
  - ë¡œì§ ì¤‘ì•™í™” + ìì‹ ì»´í¬ë„ŒíŠ¸ ìì²´ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ ì¼ê´€ëœ êµ¬ì¡°ì™€ ë™ì‘ ì ìš©
- ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ì˜ propsë¥¼ ì¡°ì‘í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ë°©ë²•ì¼ê¹Œ?
  - ì½”ë“œì˜ ì–‘ì´ ëŠ˜ì–´ë‚¨
  - ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©, í…ŒìŠ¤íŠ¸ì™€ íƒ€ì… ì •ì˜ì— ë³µì¡ë„ê°€ ì˜¬ë¼ê°€ì§€ ì•ŠëŠ”ê°€?
- ì˜ˆì‹œ

```jsx
const Row = ({ children }) => {
  return (
    <div className="row">
      {React.Children.map(children, (child, idx) => {
        return React.cloneElement(child, {
          style: {
            ...child.props.style,
            ...(idx % 2 && { backgroundColor: "#eee" }),
          },
        });
      })}
    </div>
  );
};
```

```jsx
export const RadioGroup = ({ onChange, selected, children }) => {
  const RadioOptions = React.Children.map(children, (child) => {
    return React.cloneElement(child, {
      onChange,
      checked: child.props.value === selected,
    });
  });
  return <div className="RadioGroup">{RadioOptions}</div>;
};

export const RadioOption = ({ value, checked, onChange, children }) => {
  return (
    <div className="RadioOption">
      <input
        id={value}
        type="radio"
        name={value}
        value={value}
        checked={checked}
        onChange={(e) => {
          onChange(e.target.value);
        }}
      />
      <label htmlFor={value}>{children}</label>
    </div>
  );
};
```

## Higher-order components

- ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë°›ì•„ì„œ ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
- ì¼ë°˜ì ì¸ ì»¨ë²¤ì…˜: withë¡œ ì‹œì‘ (enhance ë° inject ë¨ì„ ì˜ë¯¸)
- í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ê³¼ ì ‘ëª©í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```jsx
const EnhancedComponent = HOC(WrappedComponent);
```

- ì˜ˆì‹œ HOC

```jsx
const withMousePosition = (WrappedComponent) => {
  const injectedProp = {
    mousePosition: { x: window.clientX, y: window.clientY },
  };

  return (originalProps) => {
    return <WrappedComponent injectedProp={injectedProp} {...originalProps} />;
  };
};

const withURLLocation = (WrappedComponent) => {
  const injectedProp = {
    urlLocation: { pathname: window.location.pathname },
  };

  return (originalProps) => {
    return <WrappedComponent injectedProp={injectedProp} {...originalProps} />;
  };
};
```

- ì»¤ë§: compose(f, g, h) is the same as (...args) => f(g(h(...args)))

```jsx
const enhance = compose(
  // composeëŠ” ì—¬ëŸ¬ HOCë¥¼ ê²°í•©í•˜ì—¬ í•˜ë‚˜ì˜ HOCë¡œ ë§Œë“œëŠ” pipe ì—­í• 
  withMousePosition,
  withURLLocation,
  connect(selector)
);

const EnhancedComponent = enhance(WrappedComponent);
```

## Render Props íŒ¨í„´

- ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ì„ ë Œë”ë§í•˜ëŠ” ëŒ€ì‹ , ìì‹ì„ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” íŒ¨í„´

```jsx
<DataRenderer
  url="https://example/data/1"
  render={(data) => <h1>Data: {data}</h1>}
/>;

const DataRenderer = ({ url, render }) => {
  const data = fetchData(url);
  const doSomethingWithData = (data) => {
    console.log(data);
  };

  return render(data);
};
```

## React Testing

- Best Practices
  - avoid including implementation details in tests, ì„¸ë¶€ êµ¬í˜„ ì‚¬í•­ì„ í¬í•¨í•˜ì§€ ì•Šê¸°
  - work with DOM nodes, ë¦¬ì•¡íŠ¸ê°€ ì•„ë‹ˆë¼ DOM ìš”ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸í•˜ê¸°
  - resemble software usage, ì†Œí”„íŠ¸ì›¨ì–´ ì‚¬ìš©ì„ ëª¨ë°©í•˜ê¸°
  - maintainable, ìœ ì§€ ë³´ìˆ˜ ê°€ëŠ¥í•˜ê²Œ ì‘ì„±í•˜ê¸°

### í…ŒìŠ¤íŠ¸, í”„ë¡ íŠ¸ì—”ë“œ

- react-testing-library
  - render
  - screen: reference to the object, query prebound to it - ask the whole document
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ ëª¨í‚¹ handleClick, handleSubmit
- fireEvent: ì´ë²¤íŠ¸ ë°œìƒ

```tsx
test("User is able to submit the form if the score is lower than 5 and additional feedback is provided", () => {
  const score = "3";
  const comment = "The pizza crust was too thick";
  const handleSubmit = jest.fn();
  render(<FeedbackForm onSubmit={handleSubmit} />);

  const rangeInput = screen.getByLabelText(/Score:/); // ë¼ë²¨ë¡œ input ì°¾ê¸°
  fireEvent.change(rangeInput, { target: { value: score } }); // ì´ë²¤íŠ¸ ë°œìƒ: ì´ë²¤íŠ¸ íƒ€ì¼“ì˜ value ë³€ê²½

  const commentInput = screen.getByLabelText(/Comments:/);
  fireEvent.change(commentInput, { target: { value: comment } });

  const button = screen.getByRole("button");
  fireEvent.click(button); // ì´ë²¤íŠ¸ ë°œìƒ: button onClick ì´ë²¤íŠ¸

  expect(handleSubmit).toHaveBeenCalledWith({
    score,
    comment,
  });
});
```

- queryTypes
  - getByLabelText
  - getByPlaceholderText
  - getByText
  - getByDisplayValue
